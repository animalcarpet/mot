<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>MOT Modernisation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Le styles -->
    <link href="/css/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet" >
    <link href="https://assets.digital.cabinet-office.gov.uk/static/favicon-447e4ac1ab790342660eacfe3dcce264.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
    <link href="/css/jquery.dataTables.css" media="screen" rel="stylesheet" type="text/css">
    <link href="/css/enforcement.css" media="screen" rel="stylesheet" type="text/css">    
    <!-- Scripts -->
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
    <!--[if lt IE 9]><script type="text/javascript" src="/js/html5.js"></script><![endif]-->
    <!--[if lt IE 9]><script type="text/javascript" src="/js/respond.min.js"></script><![endif]-->
    <script type="text/javascript" src="/js/jquery.dataTables.min.js"></script>    
</head>


<body class="not-fixed">
    <div class="navbar">
        <div class="container">
            <h2><a href="/" style="color: #ffffff; text-decoration: none;">DVSA MOT</a></h2>
        </div>
    </div>

    <div class="container">
        <!-- TODO PT: Should displayed data be driven by identity roles (as it is now) or by URLs?
Remove all user-details partials (probably, check with Testing and Enforcement); remove user details return from all the controller that do it; apply one styling;
-->


    <div class="row">
        <div class="col-lg-12 user-banner" id="user-info">
            <p>
                <strong>Bob Thomas Arctor</strong>
                Vehicle Examiner
                            </p>

            <div class="pull-right" style="text-decoration: none; height: 30px; line-height: 35px;">
                <!-- TODO: style="..." below is a temporary solution. Styles are to be moved into proper css file. -->
                <strong style="padding-right: 1em">
                    <a href="/logout" id="logout">Sign out</a>
                </strong>

                | <a href="/profile" id="user-profile">User profile</a>

                | <a href="/enforcement-home" id="homepage">Homepage</a>
            </div>

        </div>
    </div>
        


<h1>MOT Test History</h1>
<h2>Recent MOTs found for a Site search:</h2>

<div class="info-notice">
    <p>
        If these are <strong>not the right results</strong> you can         <a href="/mot-test-search?type=vts">search again</a>
    </p>
</div>
<div class="row">
    <div class="col-sm-12">
        <div class="table-responsive">
            <table class="table table-striped nowrap" id="listMOTs" style="width: 100%">
                <thead>
                <tr>
                    <th id="testDate">Test date/time</th>
                    <th id="result">Result</th>
                    <th id="summary">Summary</th>
                    <th id="reg">Registration</th>
                    <th id="make">Make</th>
                    <th id="model">Model</th>
                    <th id="type">Type</th>
                    <th id="userId">User ID</th>
                </tr>
                </thead>
                <tbody>
                                                                        <tr class="even">
                        <td>
                            27 Jul 2014 11:00                        </td>
                        <td>
                            <a href="javascript:void(0);"
                               class="info-popup"
                               data-placement="auto"
                               data-toggle="popover"
                               data-content="
&lt;div class=&#039;MOTs-popup&#039;&gt;Reg:  &lt;span&gt;H66T4&lt;/span&gt;
Colour: &lt;span&gt;Red&lt;/span&gt;
Odometer: &lt;span&gt;1234 mi&lt;/span&gt;
Tester: &lt;span&gt;tester1&lt;/span&gt;
Duration: &lt;span&gt;60 min&lt;/span&gt;
Result: &lt;span&gt;FAIL&lt;/span&gt;
&lt;/div&gt;
"
                               
                               role="button">
                                FAIL1                            </a>
                        </td>
                        <td>
                                                            <a id="mot-33" href="/enforcement/mot-test/33/test-summary?type=vts&vts-search=V1234">
                                    View                                </a>
                                                    </td>
                        <td>
                            H66T4                        </td>
                        <td>
                            BMW                        </td>
                        <td title="Mini" class="truncate">
                            Mini                        </td>
                        <td title="Re-Test" class="truncate">
                            Re-Test                        </td>
                        <td>
                            tester1                        </td>
                    </tr>
                                                        <tr class="odd">
                        <td>
                            27 Jul 2014 11:00                        </td>
                        <td>
                            <a href="javascript:void(0);"
                               class="info-popup"
                               data-placement="auto"
                               data-toggle="popover"
                               data-content="
&lt;div class=&#039;MOTs-popup&#039;&gt;Reg:  &lt;span&gt;H66T4&lt;/span&gt;
Colour: &lt;span&gt;Red&lt;/span&gt;
Odometer: &lt;span&gt;1234 mi&lt;/span&gt;
Tester: &lt;span&gt;tester1&lt;/span&gt;
Duration: &lt;span&gt;60 min&lt;/span&gt;
Result: &lt;span&gt;PASS&lt;/span&gt;
&lt;/div&gt;
"
                               
                               role="button">
                                PASS1                            </a>
                        </td>
                        <td>
                                                            <a id="mot-31" href="/enforcement/mot-test/31/test-summary?type=vts&vts-search=V1234">
                                    View                                </a>
                                                    </td>
                        <td>
                            H66T4                        </td>
                        <td>
                            BMW                        </td>
                        <td title="Mini" class="truncate">
                            Mini                        </td>
                        <td title="Re-Test" class="truncate">
                            Re-Test                        </td>
                        <td>
                            tester1                        </td>
                    </tr>
                                                        <tr class="even">
                        <td>
                            26 Jul 2014 11:00                        </td>
                        <td>
                            <a href="javascript:void(0);"
                               class="info-popup"
                               data-placement="auto"
                               data-toggle="popover"
                               data-content="
&lt;div class=&#039;MOTs-popup&#039;&gt;Reg:  &lt;span&gt;SFT007&lt;/span&gt;
Colour: &lt;span&gt;Black&lt;/span&gt;
Odometer: &lt;span&gt;1000 mi&lt;/span&gt;
Tester: &lt;span&gt;tester1&lt;/span&gt;
Duration: &lt;span&gt;60 min&lt;/span&gt;
Result: &lt;span&gt;FAIL&lt;/span&gt;
&lt;/div&gt;
"
                               
                               role="button">
                                FAIL1                            </a>
                        </td>
                        <td>
                                                            <a id="mot-2100" href="/enforcement/mot-test/2100/test-summary?type=vts&vts-search=V1234">
                                    View                                </a>
                                                    </td>
                        <td>
                            SFT007                        </td>
                        <td>
                            Mercedes-Benz                        </td>
                        <td title="C300" class="truncate">
                            C300                        </td>
                        <td title="Normal Test" class="truncate">
                            Normal Test                        </td>
                        <td>
                            tester1                        </td>
                    </tr>
                                                        <tr class="odd">
                        <td>
                            26 Jul 2014 11:00                        </td>
                        <td>
                            <a href="javascript:void(0);"
                               class="info-popup"
                               data-placement="auto"
                               data-toggle="popover"
                               data-content="
&lt;div class=&#039;MOTs-popup&#039;&gt;Reg:  &lt;span&gt;RIL9980&lt;/span&gt;
Colour: &lt;span&gt;Black&lt;/span&gt;
Odometer: &lt;span&gt;1000 mi&lt;/span&gt;
Tester: &lt;span&gt;tester1&lt;/span&gt;
Duration: &lt;span&gt;60 min&lt;/span&gt;
Result: &lt;span&gt;FAIL&lt;/span&gt;
&lt;/div&gt;
"
                               
                               role="button">
                                FAIL1                            </a>
                        </td>
                        <td>
                                                            <a id="mot-2101" href="/enforcement/mot-test/2101/test-summary?type=vts&vts-search=V1234">
                                    View                                </a>
                                                    </td>
                        <td>
                            RIL9980                        </td>
                        <td>
                            Subaru                        </td>
                        <td title="Impreza" class="truncate">
                            Impreza                        </td>
                        <td title="Normal Test" class="truncate">
                            Normal Test                        </td>
                        <td>
                            tester1                        </td>
                    </tr>
                                </tbody>
            </table>
        </div>
    </div>
</div>
</div>


<script type="text/javascript">

        $(document).ready(function() {
        var oTable = $('#listMOTs').dataTable({  // Usage info here: http://datatables.net/release-datatables/examples/basic_init/filter_only.html
            "bPaginate": false,                             // Disable pagination
            "bLengthChange": false,                         // Disable ability to change the number of rows
            //"sDom": "<'row'<'col-lg-12'f><'col-lg-12'l>r>t<'row'<'col-lg-12'i><'col-lg-12'>>",
            "bSort": true, 
            "bFilter": true,                                    
            "aaSorting": [[ 0, "desc" ]],                   // Sort descending by the 1st column (date/time)
            "bInfo": false,                                 // Suppress the "Showing x to N of N entries" info-footer
            "bAutoWidth": true,
            "oLanguage": {"sSearch":"Filter:"},                    // Rename the Search label
            "bProcessing": false,
            "bServerSide": false,
            "bDeferRender": true,
            "sAjaxSource": '/api/enforcement/mot-test/V1234',
            "aoColumnDefs": [
                {
                    "sClass": "truncate",
                    "aTargets": [5,6]
                }
            ]

        });

        $('#listMOTs_filter').find("input").addClass( "form-control" );


        
        // The plan is to set up all popovers as clicks for touchscreens / hovers for laptops...
        var is_touch_device = 'ontouchstart' in document.documentElement;
        if (!is_touch_device) {  // If its not a touch-device - then use hovers...
            $("[data-toggle=popover]").popover({ // More info here http://getbootstrap.com/javascript/#popovers-examples
                "placement":"top",                              // Stick it where there's room
                "html":true,                                    // Enable html in popovers
                "trigger":"hover"                               // Set up all popovers as hovers...
            });
        } else {    // Else - If it IS a touch-device use clicks (rather than hovers)...
            $("[data-toggle=popover]").popover({ // More info here http://getbootstrap.com/javascript/#popovers-examples
                "placement":"top",                              // Stick it where there's room
                "html":true,                                    // Enable html in popovers
                "trigger":"click"                               // If a touchscreen device -  set up all popovers as clicks...
            });
        }

    });
</script>

    </div> <!-- /container -->
    </body>
</html>
