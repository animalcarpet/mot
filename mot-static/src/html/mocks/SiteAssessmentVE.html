<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>VE Site Assessment Summary</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Le styles -->
	<link href="/css/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
	<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
	<link href="/css/enforcement.css" media="screen" rel="stylesheet" type="text/css">
    <!--link href="/css/form-styles.css" media="screen" rel="stylesheet" type="text/css"-->
	<link href="/img/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
	<!-- Scripts -->
	<script type="text/javascript" src="/js/libraries.min.js"></script>
	<script type="text/javascript" src="/js/typeahead.min.js"></script>

    <script type="text/javascript" src="/js/jquery.validate.min.js"></script>
    <script type="text/javascript" src="/js/additional-methods.min.js"></script>
	<!--[if lt IE 9]><script type="text/javascript" src="/js/lt.ie9.min.js"></script><![endif]-->
</head>
<body class="not-fixed">
	<div class="navbar">
			<div class="container">
				<h2>DVSA MOT</h2>
			</div>
	</div>

	<div class="container">

	<div class="row">
		<!-- Note to PHP developers -- class names and id names liable to change -->
		<div class="col-lg-12 user-banner">
		<!--will soon be div class="col-lg-12 user-banner" 		  -->	
			<p>
				<strong>Nigel Sedgwick</strong> - Vehicle Examiner                                                
			</p>		
		</div>
	</div>


    <div id="validation-summary-id" >
    </div>

    <div class="row">
      	<div class="col-lg-12">
        	<h1>Site Assessment Summary</h1>
    	</div>
	</div>

	<h4>Site Details</h4>
	<form id="ve-site-assessment" action="whatever" >

	<div class="row">
	    <div class="col-sm-4">
	        <dl>
	            <label for="vtsNameNumber"><dt>Site number and name</dt></label>
	            <dd id="vtsNumberName">
	                <input type="text" id="vts-number-name" name="vts" value="" class="form-control" placeholder="eg. V12345" maxlength="40" width="50">
	            </dd>
	        </dl>
	        <dl>
	            <label for="site-score"><dt title="Enter total from spreadsheet">Site assessment score (from spreadsheet)</dt></label>
	            <dd><input type="text" id="sitescore" name="sitescore" value=""  class="form-control-large" maxlength="6" width="6">
	          	</dd>
	        </dl>
	    </div>
	    <div class="col-sm-4 col-sm-offset-2">
			<dl>
	            <dt>&nbsp;</dt>
	            <dd>&nbsp;</dd>
	        </dl>
	        <dl>
				<dt> <!-- From http://alphagov.github.io/design-patterns/guides/date-of-birth.html -->
					<fieldset class="calendar-date"  id="formDate">
				      <legend>Visit Date</legend>
				      <div class="form-group form-group-day">
				        <label for="day">Day</label>
				        <input type="text" pattern="[0-9]*" placeholder="DD" id="day" name="day" maxlength="2" width="2" class="form-control" />
				      </div>
				      <div class="form-group form-group-month">
				        <label for="month">Month</label>
				        <input type="text" pattern="[0-9]*" id="month" placeholder="MM" name="month" maxlength="2" width="2" class="form-control" />
				      </div>
				      <div class="form-group form-group-year">
				        <label for="year">Year</label>
				        <input type="text" pattern="[0-9]*" id="year" name="year" placeholder="YYYY" maxlength="4" width="4" class="form-control" />
				      </div>
				    </fieldset>
				</dt>
			</dl>
	    </div>
	</div>
	<div class="row">
	    <div class="col-sm-4">
	        <dl>
				<label for="ae-rep-id"><dt>AE/representative ID (if applicable)</dt></label>
	            <dd>
	                <input type="text" id="ae-rep-id" value="" class="form-control">
	            </dd>
	        </dl>
	        <dl>
	            <label for="ae-rep-name"><dt>AE/representative name</dt></label>
	            <dd>
	                <input type="text" id="ae-rep-name" value=""  class="form-control">
	            </dd>
	        </dl>
	        <dl>
				<label for="ae-rep-pos"><dt>AE/representative position</dt></label>
	            <dd>
	                <input type="text" id="ae-rep-pos" value="" class="form-control">
	            </dd>
	        </dl>
	        
	    </div>
	    <div class="col-sm-4 col-sm-offset-2">
			 <dl>
	            <label for="tester-id"><dt>Tester ID</dt></label>
	            <dd><input type="text" id="tester-id" value="" class="form-control" ></dd>
	        </dl>
	        
	    </div>
	
	</div>

	<div class="row">
	    <div class="col-sm-3">
	        <dl>
	            <label for="visit-outcome"><dt>Visit outcome</dt></label>
	            <dd>
	            	<select class="form-control" id="visit-outcome">
                        <option value="Satisfactory">Satisfactory</option>
                        <option value="Shortcomings">Shortcomings found</option>
                        <option value="Abandoned">Abandoned</option>
                    </select>
                </dd>
	        </dl>
	    </div>
	    <div class="col-sm-2 col-sm-offset-3">
	        <dl>
	            <label for="advisory-issued"><dt>Advisory issued?</dt></label>
	            <dd>
	            	<select class="form-control" id="advisory-issued" >
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                    </select>
                </dd>
	        </dl>
	    </div>
	
	</div>




	<div style="padding-top:2em;"></div>
	<div class="row">
        <div class="col-sm-2">
		
           <input type="submit" value="Confirm Assessment" class="btn btn-primary" id="record_button">
        
        </div>
            
        
    </div>
    
 
	</form>
    






<script type="text/javascript">
/* log function - Used to make console logging cross browser */
function log(display) {
    if (typeof window.console !== 'undefined') {console.log(display); }
}

function setupTypeaheadOnVTS() { // Shove this into a function to make it easily re-usable
    $('#vts-number-name').typeahead([		// typeahead.js usage info here: https://github.com/twitter/typeahead.js
     {
        name: 'vtsData',
        prefetch: '/data/VTS-data.json', // 'remote' used when the data provided by local & prefetch is 
                                         // insufficient. To prevent an obscene number of requests 
                                         // to remote endpoint, typeahead.js rate-limits remote requests
        // limit: 5,  					 // can limit results if need be
        cache: false, 					 // set to true when done with development
        minLength: 4 					 // sets min length of chars before Autocomplete kicks in
 
      }
    ]);
}

/* <![CDATA[ */
$(document).ready(function() {

	setupTypeaheadOnVTS();


    // Don't forget to validate the form client-side during typing -  and proper date-checking too
    
    $("#ve-site-assessment").validate({
        rules: {
        	day:       "required number",
        	month:     "required number",
        	year:      "required number",
            sitescore: "required number"
        },
        errorClass:'inputError',
        messages: {
        	day:       {required: " ", number: " "},
        	month:     {required: " ", number: " "},
        	year:      {required: " ", number: " "},
            sitescore: {required: " - Must not be blank", 
            			number:   " - Not a decimal number!"}
        },
        invalidHandler: function(form, validator) {
            var errors = validator.numberOfInvalids();
            log("Form errors: " + errors);
            log(validator);
            if (errors) {
                $('#validation-summary-id').html("<ol><li>A valid date and score is required</li></ol>"); 
                $('#validation-summary-id').addClass("validation-summary"); 
            } 
        }
    }); 
    

     $('select,input').on('change',function () {
     	log('Some kind of input changed - remove the inputError class');
     	$(this).removeClass('inputError');
    })   

});


/* ]]> */
</script>

</div> <!-- /container -->
</body>
</html>
