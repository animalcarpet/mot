<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>MOT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- NMS NOTE - These references will need to change -->
<link type="image/x-icon" rel="shortcut icon" href="https://assets.digital.cabinet-office.gov.uk/static/favicon-447e4ac1ab790342660eacfe3dcce264.ico">

<link href="css/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" media="screen" rel="stylesheet" type="text/css">
<link href="css/app.css" media="screen" rel="stylesheet" type="text/css">
<script type="text/javascript" src="js/libraries.20141001101021.min.js"></script>
<script type="text/javascript" src="js/enforcement.20141001101021.min.js"></script>



<script type="text/javascript">
// Copied over from existing stuff - don't know if its needed
        var CSRF = {
            paramName : '_csrf_token',
            token : 'F43894AE-C21E-D244-DC0E-F451E1B7ABF0'
        };
</script>

</head>
<body>
<header class="module-global-header">
    <div class="container" id="user-info">
        <a class="global-header_home-link" href="/"><img src="img/logo_mot2.gif" alt="MOT"></a>

        <p class="global-header_name">
        Bob Thomas Arctor Enf-tester                            </p>


        <nav class="global-header_navigation">
        <ul>
            <li><a href="/" class="selected" id="homepage">Home</a></li>
            <li><a href="/profile" id="user-profile">Your Profile</a>
            </li>
            <li><a href="/logout" id="logout">Sign out</a></li>
        </ul>
    </nav>
    </div>
</header>
<div class="container">
    <div class="module-colour-flash">
    </div>
</div>
<div class="container">
     <p class="module-phase"><strong class="phase-name is-alpha">ALPHA</strong> This is a new service - your <a href="#">feedback</a> will help us to improve it.</p>
</div>
<div class="container page-content">

    <!-- Progress Tracker -->
        <!-- END -->

    <!-- Titles -->
        <!-- END -->

    <div class="row contents">
        <div class="col-lg-12">
            <div id="validationBox" style="display: none;">
                <div id="validationErrors" class="validation-summary">
                    <ol></ol>
                </div>
            </div>


<script>
    var postUrls = {
        'vrm': '../mocks/SearchVehicleResultsVRM.html',
        'vin': '../mocks/SearchVehicleResultsVIN.html'
    };
    var activePostUrl = postUrls['vrm'],
        vehicleSearchUrl = 'whatever??';
</script>

<form id="vehicle-search-form" method="get" action="../mocks/SearchVehicleResultsVRM.html">
    <div class="row" >
        <div class="col-sm-12">
            <h1>
                Search for vehicle information by...
            </h1>
        </div>
    </div>
    <div class="row form-group" >
        <div class="col-sm-6">
            <select id="type" name="type" class="form-control">
                <option id="type_vrm" value="vrm">Registration (VRM)</option>
                <option id="type_vin" value="vin">VIN/Chassis</option>
            </select>        
        </div>

    </div>
    
    <div class="row">
        <div class="col-sm-12 col-lg-8 vts-search-panel">

            <div class="row">
                <div class="col-sm-12">
                    <input type="hidden" id="search-result" name="search-result" value="not-search">                    
                    <input type="text" id="vehicle-search" name="vehicle-search" value="" class="form-control " placeholder="eg. VK02 MOT"/>
                    <button type="submit" class="btn-search" id="item-selector-btn-search">
                        <i class="fa fa-search"> </i>
                        <span class="visually-hidden"> Search</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</form>

<br />
<div class="row">
    <div class="col-sm-12">
        <p title="...if JavaScript is enabled">View hints on using Vehicle  Information Search... <i class='fa fa-lg fa-info-circle info-popup' id='info-popup' data-toggle='popover' data-content='
<b>Vehicle search examples:</b><br /><br />
When searching by Registration (VRM), entering "LOL 666" for example, finds all vehicles that have ever used this registration mark
<br /><br />
When searching by VIN/Chassis No., entering "WV1ZVB8ZH6H091598" finds the vehicle with this VIN/Chassis number. Note that any errant multiple VIN/Chassis numbers in the vehicle data records will result in more than one unique vehicle being found.
<br /><br />
Note that predictive search (autocomplete) is disabled in both cases.
<br />'> </i></p>
    </div>
</div>

</div>
</div>
    
</div>
<!-- /container -->
<footer role="contentinfo" id="footer" class="module-global-footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-9 global-footer_meta">
        <nav class="global-footer_navigation">
          <ul>
            <li>Built by the Driver &amp; Vehicle Standards Agency</li>
          </ul>
        </nav>
        <p class="global-footer_licence"><a class="licence-logo" href="http://www.nationalarchives.gov.uk/doc/open-government-licence/version/2">Open Government Licence</a> All content is available under the <a href="http://www.nationalarchives.gov.uk/doc/open-government-licence/version/2">Open Government Licence v2.0</a>, except where otherwise stated</p>
      </div>
      <div class="col-sm-3 global-footer_copyright">
        <a href="http://www.nationalarchives.gov.uk/information-management/our-services/crown-copyright.htm">&copy; Crown copyright</a>
      </div>
    </div>
  </div>
</footer>

<script type="text/javascript">

$(document).ready(function () {
    var textBox = $('#vehicle-search'),
        formSearch = $('#vehicle-search-form'),
        selectedElement = document.getElementById('type').selectedIndex;

    $("#vehicle-search-form").validate({
        errorClass: "inputError",
        errorContainer: '#validationBox',
        errorLabelContainer: '#validationErrors ol',
        wrapper: 'li'
    });

    switch (selectedElement) {
        case 0: // Registration
            textBox.attr('placeholder', 'eg. VK02 MOT');
            break;
        case 1: // VIN/Chassis
            textBox.attr('placeholder', 'eg. WV1ZZZ8ZH6H091596');
            break;
    }

    // If search entity changes - then change the search input placeholder text example..
    // and remove the typeahead

    $('#type').on('change', function () {
        selectedElement = document.getElementById('type').selectedIndex;
        switch (selectedElement) {
            case 0: // Registration (VRM)
                textBox.attr('placeholder', 'eg. VK02 MOT');
                textBox.unbind();
                formSearch.attr('action',  postUrls.vrm);
                activePostUrl = postUrls.vrm;
                break;
            case 1: // VIN/Chassis
                textBox.attr('placeholder', 'eg. WV1ZZZ8ZH6H091596');
                textBox.unbind();
                formSearch.attr('action',  postUrls.vin);
                activePostUrl = postUrls.vin;
                break;
            default:
                break;
        }
    });

    
   // The plan is to set up all popovers as clicks for touchscreens / hovers for laptops...
    var is_touch_device = 'ontouchstart' in document.documentElement;
    if (!is_touch_device) {  // If its not a touch-device - then use hovers...
        $("[data-toggle=popover]").popover({ // Info here http://getbootstrap.com/javascript/#popovers-examples
            "placement": "top",      // Stick it where there's room
            "html": true,            // Enable html in popovers
            "trigger": "hover"       // Set up all popovers as hovers...
        });
    } else {    // Else - If it IS a touch-device use clicks (rather than hovers)...
        $("[data-toggle=popover]").popover({ // More info here http://getbootstrap.com/javascript/#popovers-examples
            "placement": "top",      // Stick it where there's room
            "html": true,            // Enable html in popovers
            "trigger": "click"       // If a touchscreen device -  set up all popovers as clicks...
        });
    }

});
</script>

</body>
</html>
