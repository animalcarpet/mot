!2 Prepare test data
Test creates two organisation ($orgId1 and $orgId2) and 3 sites ($siteId1, $siteId2 and $siteId3).

!3 Create organisations and AED-X user
!| GenerateTestDataForOtherFitnesseTests     |
|orgId?  |aedmUsername?|aedUsername?|aedId?  |
|$orgId1=|$aedm1=      |$aed1=      |$aedId1=|
|$orgId2=|$aedm2=      |$aed2=      |$aedId2=|

!3 Generate sites and site related users (TESTER, SITE-X)
!| GenerateTestDataForOtherFitnesseTests                               |
|orgId  |siteId?  |testerUsername?|siteAdminUsername?|siteMngrUsername?|
|$orgId1|$siteId1=|$tester1=      |$siteAdmin1=      |$siteMng1=       |
|$orgId1|$siteId2=|$tester2=      |$siteAdmin2=      |$siteMng2=       |
|$orgId2|$siteId3=|$tester3=      |$siteAdmin3=      |$siteMng3=       |

!3 Generate users
!| GenerateTestDataForOtherFitnesseTests                                                                                             |
|vehicleExaminerUsername?|areaOfficeUsername?|dvlaOperUsername?|cscoUsername?|schememgtUsername?|financeUsername?|schemeuserUsername?|
|$ve=                    |$areaOffice=       |$dvlaOper=       |$csco=       |$schemeMng=       |$financeUser=   |$schemeUser=       |



!2 Check permission against default organisation ($orgId1)
- accessMotTestLogData: Check permission to get Mot Test Log Data (OrganisationApi\Service\MotTestLogService);
- accessMotTestLogSummary: Check permission to get Mot Test Log Summary Data (DvsaElasticSearch\Service\findTestsLog);
- accessListOfSites: Check permission to get list of VTS sites by Organisation Id (OrganisationApi\Service\SiteService\getListForOrganisation());

!|MotFitnesse_Organisation_CheckPermissionByOrgId|$orgId1                                                                       |
|Role                                            |Username    |accessMotTestLogData?|accessMotTestLogSummary?|accessListOfSites?|
|TESTER                                          |$tester1    |OK                   |OK                      |OK                |
|TESTER                                          |$tester2    |OK                   |OK                      |OK                |
|TESTER                                          |$tester3    |Forbidden            |Forbidden               |Forbidden         |
|SITE-MANAGER                                    |$siteMng1   |OK                   |OK                      |OK                |
|SITE-MANAGER                                    |$siteMng3   |Forbidden            |Forbidden               |Forbidden         |
|FINANCE                                         |$financeUser|OK                   |OK                      |Forbidden         |
|FINANCE                                         |$financeUser|OK                   |OK                      |Forbidden         |
|SITE-ADMIN                                      |$siteAdmin1 |OK                   |OK                      |OK                |
|SITE-ADMIN                                      |$siteAdmin3 |Forbidden            |Forbidden               |Forbidden         |
|AED                                             |$aed1       |OK                   |OK                      |OK                |
|AED                                             |$aed2       |Forbidden            |Forbidden               |Forbidden         |
|AEDM                                            |$aedm1      |OK                   |OK                      |OK                |
|AEDM                                            |$aedm2      |Forbidden            |Forbidden               |Forbidden         |
|VE                                              |$ve         |OK                   |OK                      |OK                |
|AREA-OFFICE                                     |$areaOffice |OK                   |OK                      |OK                |
|DVLA-OPER                                       |$dvlaOper   |Forbidden            |Forbidden               |Forbidden         |
|CSCO                                            |$csco       |OK                   |OK                      |OK                |
|SCHEME-MANAGER                                  |$schemeMng  |OK                   |OK                      |OK                |
|SCHEME-USER                                     |$schemeUser |OK                   |OK                      |OK                |

!2 Check permission by personId ($orgId1)
- accessAeListByPersonId: Check permission to get List of Authorised Examiners by person Id (OrganisationApi\Service\AuthorisedExaminerService\getAuthorisedExaminersForPerson)

!|MotFitnesse_Organisation_CheckPermissionByPersonId|$aedId1                            |
|Role                                               |Username   |accessAeListByPersonId?|
|TESTER                                             |$tester1   |Forbidden              |
|TESTER                                             |$tester2   |Forbidden              |
|TESTER                                             |$tester3   |Forbidden              |
|SITE-MANAGER                                       |$siteMng1  |Forbidden              |
|SITE-MANAGER                                       |$siteMng3  |Forbidden              |
|SITE-ADMIN                                         |$siteAdmin1|Forbidden              |
|SITE-ADMIN                                         |$siteAdmin3|Forbidden              |
|AED                                                |$aed1      |Forbidden              |
|AED                                                |$aed2      |Forbidden              |
|AEDM                                               |$aedm1     |Forbidden              |
|AEDM                                               |$aedm2     |Forbidden              |
|VE                                                 |$ve        |OK                     |
|AREA-OFFICE                                        |$areaOffice|OK                     |
|DVLA-OPER                                          |$dvlaOper  |Forbidden              |
|CSCO                                               |$csco      |OK                     |
|SCHEME-MANAGER                                     |$schemeMng |OK                     |
