!***> Generating test subjects

!5 Create a couple of Testers
!| GenerateTestDataForOtherFitnesseTests         |
|testerUsername?    |testerId?                   |
|$testerMA_username=|$testerMA_id=|to become AEDM|
|$testerMD_username=|$testerMD_id=|to become AEDM|
|$testerDA_username=|$testerDA_id=|to become AED |
|$testerDB_username=|$testerDB_id=|to become AED |
|$testerDD_username=|$testerDD_id=|to become AED |
|$testerDS_username=|$testerDS_id=|to become AED |

!5 Create a couple of AEDs
!| GenerateTestDataForOtherFitnesseTests|
|aedUsername?          |aedId?          |
|$aedA_username=       |$aedA_id=       |
|$aedB_username=       |$aedA_id=       |

!5 Create a couple of AEDMs
!| GenerateTestDataForOtherFitnesseTests|
|aedmUsername?         |aedmId?         |
|$aedmA_username=      |$aedmA_id=      |
|$aedmB_username=      |$aedmA_id=      |

!5 Create an Area Office 1 user
!| GenerateTestDataForOtherFitnesseTests|
|areaOfficeUsername?   |areaOfficeId?   |
|$ao1_username=        |$ao1_id=        |

!5 Create an Area Office 2 user
!| GenerateTestDataForOtherFitnesseTests|
|areaOffice2Username?  |areaOffice2Id?  |
|$ao2_username=        |$ao2_id=        |

!5 Create a couple of Organisations
!| GenerateTestDataForOtherFitnesseTests                         |
|orgId?   |siteId?   |siteMngrUsername?       |siteMngrId?       |
|$orgA_id=|$siteA_id=|$siteAManagerA_username=|$siteAManagerA_id=|
|$orgD_id=|$siteA_id=|$siteAManagerA_username=|$siteAManagerA_id=|


*!

!3 Using the above generated test subjects to test:

!4 Create position
!| VM-8416 check hierarchies during nomination process create                                                                                                                                                  |
|Nominator         |Nominate    |Username          |To be|At      |And it will result in?                                                      |Position Id?|Comment                                           |
|$testerMA_username|$testerDA_id|$testerDA_username|AED  |$orgA_id|Forbidden error, code 160                                                   |            |Tester can not self-nominate AED                  |
|$testerMA_username|$testerMA_id|$testerMA_username|AEDM |$orgA_id|Forbidden error, code 160                                                   |            |Tester can not self-nominate AEDM                 |
|$testerMA_username|$testerDB_id|$testerDB_username|AED  |$orgA_id|Forbidden error, code 160                                                   |            |Tester can not nominate AED                       |
|$testerMA_username|$testerMD_id|$testerMD_username|AEDM |$orgA_id|Forbidden error, code 160                                                   |            |Tester can not nominate AEDM                      |
|$aedA_username    |$testerDA_id|$testerDA_username|AED  |$orgA_id|Forbidden error, code 160                                                   |            |Disassociate AED can not nominate AED             |
|$aedA_username    |$testerMA_id|$testerMA_username|AEDM |$orgA_id|Forbidden error, code 160                                                   |            |Disassociate AED can not nominate AEDM            |
|$aedmA_username   |$testerDA_id|$testerDA_username|AED  |$orgA_id|Forbidden error, code 160                                                   |            |Disassociate AEDM can not nominate AED            |
|$aedmA_username   |$testerMA_id|$testerMA_username|AEDM |$orgA_id|Forbidden error, code 160                                                   |            |Disassociate AEDM can not nominate AEDM           |
|$ao1_username     |$testerDA_id|$testerDA_username|AED  |$orgA_id|Forbidden error, code 160                                                   |            |AO1 can not nominate AED                          |
|$ao1_username     |$testerMA_id|$testerMA_username|AEDM |$orgA_id|Forbidden error, code 160                                                   |            |AO1 can not nominate AEDM                         |
|$ao2_username     |$testerDA_id|$testerDA_username|AED  |$orgA_id|=~/\{"id":\d+\}/                                                            |$positionDA=|AO2 can nominate AED                              |
|$ao2_username     |$testerMA_id|$testerMA_username|AEDM |$orgA_id|=~/\{"id":\d+\}/                                                            |$positionMA=|AO2 can nominate AEDM                             |
|$testerMA_username|$ao1_id     |$ao1_username     |AED  |$orgA_id|You can not nominate a user with DVSA role for trade roles. error, code 60  |            |Can not nominate a DVSA role owner for trade roles|
|$ao2_username     |$testerMA_id|$testerMA_username|AEDM |$orgA_id|This person already has this role error, code 60                            |            |Tester already is an AEDM                         |
|$testerDA_username|$testerDB_id|$testerDB_username|AED  |$orgA_id|Forbidden error, code 160                                                   |            |Tester now is an AED & can't nominate AED         |
|$testerDA_username|$testerDA_id|$testerDA_username|AEDM |$orgA_id|Forbidden error, code 160                                                   |            |Tester now is an AED & can't nominate AEDM        |
|$testerDA_username|$testerA_id |$testerA_username |AEDM |$orgA_id|Forbidden error, code 160                                                   |            |Tester now is an AED & can't self-nominate AEDM   |
|$testerMA_username|$testerDB_id|$testerDB_username|AED  |$orgA_id|=~/\{"id":\d+\}/                                                            |$positionDB=|Tester now is an AEDM & can nominate AED          |
|$testerMA_username|$testerMD_id|$testerMD_username|AEDM |$orgA_id|There is already an AEDM assigned to this Authorised Examiner error, code 60|            |Organisation A already has an AEDM                |
|$ao2_username     |$testerMD_id|$testerMD_username|AED  |$orgD_id|=~/\{"id":\d+\}/                                                            |$positionMD=|AO2 can nominate AED                              |
|$ao2_username     |$testerDD_id|$testerDD_username|AEDM |$orgD_id|=~/\{"id":\d+\}/                                                            |$positionDD=|AO2 can nominate AEDM                             |
|$ao2_username     |$testerDS_id|$testerDS_username|AED  |$orgA_id|=~/\{"id":\d+\}/                                                            |$positionDS=|AO2 can nominate AED                              |

!4 List position
!| VM-8416 check hierarchies during nomination process list                                                                                        |
|Acting User            |try to get the management roles at organisation|And it will result in?                                                    |
|$aedA_username         |$orgA_id                                       |Forbidden error, code 160|Disassociate AED can not get list of another AE |
|$aedmA_username        |$orgA_id                                       |Forbidden error, code 160|Disassociate AEDM can not get list of another AE|
|$ao1_username          |$orgA_id                                       |                         |AO1 can get list of another AE  roles           |
|$ao2_username          |$orgA_id                                       |                         |AO2 can get list of another AE  roles           |
|$testerDA_username     |$orgA_id                                       |                         |AED can get list of AE   roles                  |
|$testerMA_username     |$orgA_id                                       |                         |AEDM can get list of AE  roles                  |
|$siteAManagerA_username|$orgA_id                                       |Forbidden error, code 160|Site Manager can not get list of AE roles       |

!4 Remove position
!| VM-8416 check hierarchies during nomination process remove                                                                          |
|Acting User       |At      |try to disassociate user by id|Position Id|And it will result in?   |Comment                              |
|$ao1_username     |$orgA_id|$testerMA_id                  |$positionMA|Forbidden error, code 160|AO1 can not remove AEDM              |
|$ao1_username     |$orgA_id|$testerDA_id                  |$positionDA|Forbidden error, code 160|AO1 can not remove AED               |
|$aedA_username    |$orgA_id|$testerMA_id                  |$positionMA|Forbidden error, code 160|Disassociate AED can not remove AEDM |
|$aedA_username    |$orgA_id|$testerDA_id                  |$positionDA|Forbidden error, code 160|Disassociate AED can not remove AED  |
|$aedmA_username   |$orgA_id|$testerMA_id                  |$positionMA|Forbidden error, code 160|Disassociate AEDM can not remove AEDM|
|$aedmA_username   |$orgA_id|$testerDA_id                  |$positionDA|Forbidden error, code 160|Disassociate AEDM can not remove AED |
|$testerDA_username|$orgA_id|$testerMA_id                  |$positionMA|Forbidden error, code 160|AED can not remove AEDM              |
|$testerDA_username|$orgA_id|$testerDB_id                  |$positionDB|Forbidden error, code 160|AED can not remove AED               |
|$testerMA_username|$orgA_id|$testerDA_id                  |$positionDA|[]                       |AEDM can remove AED                  |
|$testerDS_username|$orgA_id|$testerDS_id                  |$positionDS|[]                       |AED can remove his/her own role      |
|$testerMA_username|$orgA_id|$testerMA_id                  |$positionMA|Forbidden error, code 160|AEDM can not remove his/her own role |
|$ao2_username     |$orgD_id|$testerDD_id                  |$positionDD|[]                       |AO2 can remove AEDM                  |
|$ao2_username     |$orgD_id|$testerMD_id                  |$positionMD|[]                       |AO2 can remove AED                   |
|$ao2_username     |$orgA_id|$testerMA_id                  |$positionMA|[]                       |AO2 can remove AED                   |

!4 List positions after losing AED role
!| VM-8416 check hierarchies during nomination process list                                                                                 |
|Acting User       |try to get the management roles at organisation|And it will result in?                                                  |
|$testerDA_username|$orgA_id                                       |Forbidden error, code 160|Disassociate AED can not get list of AE roles |
|$testerMA_username|$orgA_id                                       |Forbidden error, code 160|Disassociate AEDM can not get list of AE roles|
