<?php

use DvsaCommon\UrlBuilder\VehicleTestingStationUrlBuilderWeb;
use Site\ViewModel\SiteSearchViewModel;

/**
 * @var SiteSearchViewModel $viewModel
 */

$sites = $viewModel->getSites();

?>

<div class="row module-user-management">
    <div class="col-sm-8 module-user-management">
        <p>
            <strong><?php echo $this->escapehtml($viewModel->getTotalResults()); ?></strong>
            result(s) found for <strong><?php echo $this->escapeHtml($viewModel->displaySearchCriteria()); ?></strong>
        </p>

        <table class="table">
            <thead>
            <tr>
                <th class="">Site number</th>
                <th class="">Trading name</th>
                <th class="">Town</th>
                <th class="">Postcode</th>
                <th class="">Class</th>
                <th class="">Type</th>
            </tr>
            </thead>

            <tbody>
            <?php foreach ($sites as $site): ?>
                <tr>
                    <td>
                        <a href="<?php echo $this->escapeHtmlAttr(VehicleTestingStationUrlBuilderWeb::byId($site->getId())); ?>">
                            <?php echo $this->escapeHtml($site->getSiteNumber()); ?>
                        </a>
                    </td>
                    <td><?php echo $this->escapeHtml($site->getSiteName()); ?></td>
                    <td><?php echo $this->escapeHtml($site->getSiteTown()); ?></td>
                    <td><?php echo $this->escapeHtml($site->getSitePostcode()); ?></td>
                    <td><?php echo $this->escapeHtml($site->getSiteVehicleClass()); ?></td>
                    <td><?php echo $this->escapeHtml($site->getSiteType()); ?></td>
                </tr>
            <?php endforeach; ?>

            </tbody>
        </table>
    </div>
</div>

    <nav class="content-navigation">
<?php echo $this->partial(
    'partial/gds/form/control-navigation-secondary',
    [
        'navigation'    => [
            'Back to site search' => $viewModel->getSearchPage(),
        ]
    ]
); ?>
    </nav>
